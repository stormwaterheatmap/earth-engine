//ui.root.clear();

//sandbox 
ui.root.setLayout(ui.Panel.Layout.absolute());

// data 
var data = require('users/stormwaterheatmap/apps:data/data_dict.js')
var Style = require('users/stormwaterheatmap/apps:Modules/Style')
var helpers = require('users/stormwaterheatmap/apps:Modules/helpers')
print(data)
var fonts = Style.fonts 

var rasters = data.rasters
var layer_types = Object.keys(rasters)
var test_list = (Object.keys(rasters["Input Data Layers"]))
  



/* ----------------------------
WIDGETS 
*/
/* Select */ 

var panel = ui.Panel();

/* Label */ 

var panel_label = helpers.info_panel("Select Layer Type:","null")
        
var layer_label = ui.Label({value:"Display Layer:"})
var panel_layout = ui.Panel.Layout.absolute("bottom-left")

/* Style */ 

panel_label.style().set('fontWeight','500')

var panel_style = {position: 'bottom-left'}//,width:'300px', height:"80%"}



/* Panel */ 
var panel = ui.Panel({style:panel_style})//, layout:panel_layout})//, })
//Map.add(panel)

var legendPanel = ui.Panel({style:{position:'bottom-left',shown:false, minWidth: "300px"}
})
Map.add(legendPanel)
var select_layer_type = ui.Select({
  items: layer_types,
  placeholder: "Select Layer Type", 
  value: layer_types[0], 
  onChange: function() {
    var layer_dict = rasters[select_layer_type.getValue()]; 
    var layers_list = Object.keys(layer_dict); 
      secondname_select = ui.Select({
        items: layers_list,//select_layer_type.getValue()], 
        onChange: function() {
          var layer_obj = layer_dict[secondname_select.getValue()]
          legendPanel.style().set({shown:true})
          helpers.clear_map_add_layer(layer_obj,legendPanel)
        }
      });
    
  
  
    panel.widgets().set(3, secondname_select);
  }
  
  });




var secondname_select = ui.Select();
panel.widgets().set(0, panel_label); 
panel.widgets().set(1, select_layer_type);
panel.widgets().set(2,layer_label); 
panel.widgets().set(3, secondname_select);

var map_init = function(map){
 var m = map || Map
 //m.clear()
 //m.add(panel)
 //m.add(legendPanel)
 select_layer_type.setValue("Input Data Layers")
 secondname_select.setValue("Slope")
 //legendPanel.style().set({shown:true})
          //helpers.clear_map_add_layer(layer_obj,legendPanel)
  
}
helpers.make_tnc_map()
map_init()
var mainPanel = helpers.makeMainPanel("View Data Layers");
mainPanel.add(panel)
Map.add(mainPanel)

